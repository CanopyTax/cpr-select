/*!
 * cpr-select
 * author: Bret Little
 * copyright: 2015
 * license: MIT
 * version: 1.0.0
 */
!function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={exports:{},id:i,loaded:!1};return e[i].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function i(e,t){for(var n,i=!0;i;){i=!1;var o=e,s=t;if(!o)return!1;if(n=o.className.indexOf(s)>-1)return n;e=o.parentElement,t=s,i=!0}}var o=function(e){return e&&e.__esModule?e["default"]:e},s=o(n(1)),r=n(2),a=(r.without,r.contains,r.union,r.isNull,r.findIndex);n(3);var l=void 0,c=void 0,d=s.createClass({displayName:"CanopySelect",componentWillMount:function(){document.body.addEventListener("click",this.state.close)},componentWillUnmount:function(){document.body.removeEventListener("click",this.state.close)},getInitialState:function(){var e=this,t=null;return this.props.selected&&(t=a(this.props.options,{key:this.props.selected})),{selectedIndex:t,dialogDisplayed:!1,top:0,focused:!1,close:function(t){i(t.target,"cp-select-outer")||e.setState({dialogDisplayed:!1,focused:!1})}}},displayDialog:function(e){this.setState({dialogDisplayed:!0})},onKeyDown:function(e){var t=e.which,n=this.state.selectedIndex;9!==t&&e.preventDefault(),13===t?this.selectItem(n):38===t?this.setState({dialogDisplayed:!0,selectedIndex:n?n-1:0}):40===t?n===this.props.options.length-1?this.setState({dialogDisplayed:!0}):this.setState({dialogDisplayed:!0,selectedIndex:n?n+1:0}):27===t?this.setState({dialogDisplayed:!1}):this.highlightByText(e.which)},triggerItemChange:function(){this.props.onChange&&this.props.onChange.call(null,this.props.options[this.state.selectedIndex],this.state.selectedIndex)},selectItem:function(e,t){var n=this;setTimeout(function(){n.setState({selectedIndex:e,focused:!0,dialogDisplayed:!1}),setTimeout(n.triggerItemChange)})},positionDialogAndGetTop:function(e,t){var n=e.length-t;return t>5&&6>n?e.length<11?-2+(36*t*-1-10)+"px":(this.positionDialog(t),-215-36*(5-n)+"px"):t>5?(this.positionDialog(t),"-203px"):-1+(36*t*-1-10)+"px"},positionDialog:function(e){var t=this;setTimeout(function(){var n=s.findDOMNode(t).querySelector(".cp-select__menu");n&&(n.scrollTop=36*e-192)})},focusSelect:function(){this.state.focused||this.setState({focused:!0})},onBlur:function(){this.setState({focused:!1})},highlightByText:function(e){l+=String.fromCharCode(e);var t=this.getIndexFromString(l);t>-1&&this.setState({selectedIndex:t}),c=setTimeout(function(){l=""},1e3)},getIndexFromString:function(e){var t=this;return e=e.toLowerCase(),a(this.props.options,function(n){return 0===t.getViewValue(n).toLowerCase().indexOf(e)})},getViewValue:function(e){return e.value||e},getDialog:function(e,t){var n=this;if(e){var i=function(){var e=n.state.selectedIndex,i=t.map(function(t,i){return s.createElement("li",{key:t.key,className:e===i?"+selected":"",onMouseDown:n.selectItem.bind(n,i)},s.createElement("a",null,t.value))});return setTimeout(function(){s.findDOMNode(n).querySelector(".cp-select__hidden-input").focus()},100),{v:s.createElement("div",null,s.createElement("ul",{className:"cp-select__menu cps-dropdown-menu",style:{top:n.positionDialogAndGetTop(t,e)}},i))}}();if("object"==typeof i)return i.v}},render:function(){var e="cp-select",t=this.props.options[this.state.selectedIndex];return this.props.disabled&&(e+=" +disabled"),this.state.focused&&(e+=" +focus"),s.createElement("div",{className:"cp-select-outer",role:"select"},s.createElement("input",{className:"cp-select__hidden-input",onFocus:this.focusSelect,onBlur:this.onBlur,onKeyDown:this.onKeyDown}),s.createElement("div",{className:e,onClick:this.displayDialog},s.createElement("div",{className:"cp-select__selected"},t?t.value:this.props.placeholder),s.createElement("div",{className:"cp-select__icon"})),this.getDialog(this.state.dialogDisplayed,this.props.options))}});window.CanopySelect||(window.CanopySelect=d),e.exports=d},function(e,t){e.exports=React},function(e,t){e.exports=_},function(e,t,n){var i=n(4);"string"==typeof i&&(i=[[e.id,i,""]]);n(6)(i,{})},function(e,t,n){t=e.exports=n(5)(),t.push([e.id,".cp-select-outer{position:relative;height:32px;font-size:12px}.cp-select{border-radius:2px;box-shadow:0 1px 4px 0 rgba(0,0,0,.26);display:inline-block;padding:8px 14px;min-width:140px;color:#AFAFAF;background-color:#fff;cursor:pointer;width:100%;height:32px}.cps-has-error .cp-select{box-shadow:0 1px 4px 0 #FE996C}.cp-select.\\+disabled{cursor:not-allowed;background-color:#F9F9F9;opacity:1;border:1px dashed #CFCFCF}.cp-select.\\+focus{box-shadow:0 0 0 2px rgba(76,175,80,.3)}.cp-select__selected{width:calc(100% - 15px);vertical-align:middle;display:inline-block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.cp-select__icon{display:inline-block;border-color:#AFAFAF transparent;border-style:solid;border-width:6px 6px 0 6px;height:0;width:0;float:right;position:relative;top:6px}.cp-select-outer .cp-select__menu{display:block;max-height:400px;overflow:auto;width:100%;position:absolute;font-size:12px}.cp-select-outer .cp-select__menu li{height:36px!important}.cp-select-outer .cp-select__menu li.\\+selected>a{color:#333;text-decoration:none;background-color:#f7f7f7}.cp-select__hidden-input{opacity:0;position:absolute;left:0;top:0;width:0;height:0}",""])},function(e,t){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t];n[2]?e.push("@media "+n[2]+"{"+n[1]+"}"):e.push(n[1])}return e.join("")},e}},function(e,t,n){function i(e,t){for(var n=0;n<e.length;n++){var i=e[n],o=d[i.id];if(o){o.refs++;for(var s=0;s<o.parts.length;s++)o.parts[s](i.parts[s]);for(;s<i.parts.length;s++)o.parts.push(r(i.parts[s],t))}else{for(var a=[],s=0;s<i.parts.length;s++)a.push(r(i.parts[s],t));d[i.id]={id:i.id,refs:1,parts:a}}}}function o(e){for(var t=[],n={},i=0;i<e.length;i++){var o=e[i],s=o[0],r=o[1],a=o[2],l=o[3],c={css:r,media:a,sourceMap:l};n[s]?n[s].parts.push(c):t.push(n[s]={id:s,parts:[c]})}return t}function s(){var e=document.createElement("style"),t=h();return e.type="text/css",t.appendChild(e),e}function r(e,t){var n,i,o;if(t.singleton){var r=g++;n=f||(f=s()),i=l.bind(null,n,r,!1),o=l.bind(null,n,r,!0)}else n=s(),i=c.bind(null,n),o=function(){n.parentNode.removeChild(n)};return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else o()}}function a(e,t,n){var i=["/** >>"+t+" **/","/** "+t+"<< **/"],o=e.lastIndexOf(i[0]),s=n?i[0]+n+i[1]:"";if(e.lastIndexOf(i[0])>=0){var r=e.lastIndexOf(i[1])+i[1].length;return e.slice(0,o)+s+e.slice(r)}return e+s}function l(e,t,n,i){var o=n?"":i.css;if(e.styleSheet)e.styleSheet.cssText=a(e.styleSheet.cssText,t,o);else{var s=document.createTextNode(o),r=e.childNodes;r[t]&&e.removeChild(r[t]),r.length?e.insertBefore(s,r[t]):e.appendChild(s)}}function c(e,t){var n=t.css,i=t.media,o=t.sourceMap;if(o&&"function"==typeof btoa)try{n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(JSON.stringify(o))+" */",n='@import url("data:text/css;base64,'+btoa(n)+'")'}catch(s){}if(i&&e.setAttribute("media",i),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}var d={},p=function(e){var t;return function(){return"undefined"==typeof t&&(t=e.apply(this,arguments)),t}},u=p(function(){return/msie 9\b/.test(window.navigator.userAgent.toLowerCase())}),h=p(function(){return document.head||document.getElementsByTagName("head")[0]}),f=null,g=0;e.exports=function(e,t){t=t||{},"undefined"==typeof t.singleton&&(t.singleton=u());var n=o(e);return i(n,t),function(e){for(var s=[],r=0;r<n.length;r++){var a=n[r],l=d[a.id];l.refs--,s.push(l)}if(e){var c=o(e);i(c,t)}for(var r=0;r<s.length;r++){var l=s[r];if(0===l.refs){for(var p=0;p<l.parts.length;p++)l.parts[p]();delete d[l.id]}}}}}]);